# 5. Sessions and State Management Example

This directory contains an example demonstrating session management and state persistence using the Google Agent Development Kit (ADK).

## `basic_stateful_session.py`

This script showcases how to create and manage stateful sessions with an agent.

### Key Features Demonstrated:

*   **Session Creation**: Initializes an `InMemorySessionService` to store session data.
*   **Initial State**: A new session is created with a predefined `initial_state` dictionary, which can include user-specific information like name and preferences.
*   **Agent Interaction**: A `Runner` is configured to interact with a `question_answering_agent` (assumed to be defined elsewhere, e.g., in `question_answering_agent.py`).
*   **Stateful Conversation**: The script sends a message to the agent ("What are my preferences?"), and the agent can potentially use the session state to answer.
*   **Session State Inspection**: After the interaction, the script retrieves and prints the session's state, allowing observation of how it might have been accessed or modified during the agent's processing.

### How it Works:

1.  **Environment Setup**: Loads environment variables (e.g., API keys) using `dotenv`.
2.  **Session Service**: An `InMemorySessionService` is instantiated. For production scenarios, a persistent session service (like Firestore) would typically be used.
3.  **Initial State Definition**: A dictionary `initial_state` is defined, containing sample user data.
4.  **Session Creation**: A unique session is created using `session_service_stateful.create_session()`, associating it with an app name, user ID, a unique session ID, and the `initial_state`.
5.  **Runner Initialization**: A `Runner` instance is created, linking the `question_answering_agent` with the `session_service_stateful`.
6.  **Message Processing**: A user message is constructed and sent to the agent via `runner.run()`. The script iterates through the events generated by the runner and prints the final response.
7.  **State Retrieval**: Finally, the script fetches the session from the `session_service_stateful` and prints its current state to demonstrate that the state has been maintained.

### To Run This Example:

1.  Ensure you have the Google ADK and necessary dependencies (`python-dotenv`, `rich`, `google-generativeai`) installed.
2.  Make sure you have a `question_answering_agent.py` file in the same directory or accessible in your `PYTHONPATH`, defining the `question_answering_agent`.
3.  Set up any required environment variables (e.g., API keys for the LLM used by the agent) in a `.env` file.
4.  Execute the script: `python basic_stateful_session.py`

This example provides a foundational understanding of how to manage conversational state within Google ADK applications, enabling agents to remember context and personalize interactions across multiple turns.
